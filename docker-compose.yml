version: "3.4"

services:
  api:
    build:
      context: ./api
    image: datamodelingtool.azurecr.io/dmt/api
    restart: unless-stopped
    environment:
      ENVIRONMENT: azure
      JOB_SERVICE_ENABLED: 1
      SCHEDULER_ENVS_TO_EXPORT: "PUBLIC_DMSS_API,SIMA_LICENSE"
      SCHEDULER_REDIS_HOST: job-store
      SCHEDULER_REDIS_PORT: 6379
      SCHEDULER_REDIS_SSL: "false"
      MONGO_INITDB_ROOT_USERNAME: maf
      MONGO_INITDB_ROOT_PASSWORD: maf
      APPLICATION_HOME: /code/src/home
      API_ENV: development
      DMSS_API: http://dmss:5000
    ports:
      - "5000:5000"
